<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extracts and processes commercial data from Database — get_comland_data • comlandr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extracts and processes commercial data from Database — get_comland_data"><meta name="description" content='Connects to Population dynamics Database STOCKEFF to pull US landings data.
Data is also pulled from NAFO (foreign landings) and the State of Maine (Herring).
These sources of data are then aggregated, species value is adjusted to a user defined reference year,
skate and hake landings (often reported as an unclassified category) are split based on bottom trawl survey,
and missing values are imputed. For more information regarding these methods
see vignette("Overview", package = "comlandr")'><meta property="og:description" content='Connects to Population dynamics Database STOCKEFF to pull US landings data.
Data is also pulled from NAFO (foreign landings) and the State of Maine (Herring).
These sources of data are then aggregated, species value is adjusted to a user defined reference year,
skate and hake landings (often reported as an unclassified category) are split based on bottom trawl survey,
and missing values are imputed. For more information regarding these methods
see vignette("Overview", package = "comlandr")'><meta property="og:image" content="https://noaa-edab.github.io/comlandr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">comlandr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/comlandr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-help" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Help</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-help"><li><a class="dropdown-item" href="../articles/Overview.html">Overview of package</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Foreign Data (NAFO)</h6></li>
    <li><a class="dropdown-item" href="../articles/ForeignCatch.html">NAFO Data structure</a></li>
    <li><a class="dropdown-item" href="../articles/ForeignCatchCompare21A21B.html">Comparison of 21A and 21B data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NOAA-EDAB/comlandr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extracts and processes commercial data from Database</h1>
      <small class="dont-index">Source: <a href="https://github.com/NOAA-EDAB/comlandr/blob/master/R/get_comland_data.R" class="external-link"><code>R/get_comland_data.R</code></a></small>
      <div class="d-none name"><code>get_comland_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Connects to Population dynamics Database STOCKEFF to pull US landings data.
Data is also pulled from NAFO (foreign landings) and the State of Maine (Herring).
These sources of data are then aggregated, species value is adjusted to a user defined reference year,
skate and hake landings (often reported as an unclassified category) are split based on bottom trawl survey,
and missing values are imputed. For more information regarding these methods
see <code><a href="../articles/Overview.html">vignette("Overview", package = "comlandr")</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_comland_data</span><span class="op">(</span></span>
<span>  <span class="va">channel</span>,</span>
<span>  filterByYear <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  filterByArea <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  useLanded <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  removeParts <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  useHerringMaine <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  useForeign <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  refYear <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  refMonth <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  disagSkatesHakes <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  aggArea <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  userAreas <span class="op">=</span> <span class="fu">comlandr</span><span class="fu">::</span><span class="va"><a href="mskeyAreas.html">mskeyAreas</a></span>,</span>
<span>  areaDescription <span class="op">=</span> <span class="st">"EPU"</span>,</span>
<span>  propDescription <span class="op">=</span> <span class="st">"MeanProp"</span>,</span>
<span>  applyProp <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  aggGear <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  userGears <span class="op">=</span> <span class="fu">comlandr</span><span class="fu">::</span><span class="va"><a href="mskeyGears.html">mskeyGears</a></span>,</span>
<span>  fleetDescription <span class="op">=</span> <span class="st">"Fleet"</span>,</span>
<span>  unkVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MONTH"</span>, <span class="st">"NEGEAR"</span>, <span class="st">"AREA"</span><span class="op">)</span>,</span>
<span>  knStrata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HY"</span>, <span class="st">"QY"</span>, <span class="st">"MONTH"</span>, <span class="st">"NEGEAR"</span>, <span class="st">"TONCL2"</span>, <span class="st">"AREA"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-channel">channel<a class="anchor" aria-label="anchor" href="#arg-channel"></a></dt>
<dd><p>an Object inherited from <code>Oracle</code>. This object is used to connect
to communicate with the database engine. (see <code>connect_to_database</code>)</p></dd>


<dt id="arg-filterbyyear">filterByYear<a class="anchor" aria-label="anchor" href="#arg-filterbyyear"></a></dt>
<dd><p>numeric vector. Years to retrieve data for (Default = NA, pull all years)</p></dd>


<dt id="arg-filterbyarea">filterByArea<a class="anchor" aria-label="anchor" href="#arg-filterbyarea"></a></dt>
<dd><p>numeric vector. Statistical Areas to retrieve data for (Default = NA, pull all areas)</p></dd>


<dt id="arg-uselanded">useLanded<a class="anchor" aria-label="anchor" href="#arg-uselanded"></a></dt>
<dd><p>boolean. Default = T</p></dd>


<dt id="arg-removeparts">removeParts<a class="anchor" aria-label="anchor" href="#arg-removeparts"></a></dt>
<dd><p>boolean. Remove species parts (Heads, wings, etc), Default = T</p></dd>


<dt id="arg-useherringmaine">useHerringMaine<a class="anchor" aria-label="anchor" href="#arg-useherringmaine"></a></dt>
<dd><p>boolean. Pull data from Maine Herring database or use herring data in commercial landings database (Default = T)</p></dd>


<dt id="arg-useforeign">useForeign<a class="anchor" aria-label="anchor" href="#arg-useforeign"></a></dt>
<dd><p>boolean. Pull foreign data from NAFO. Default = T</p></dd>


<dt id="arg-refyear">refYear<a class="anchor" aria-label="anchor" href="#arg-refyear"></a></dt>
<dd><p>numeric. Reference year to use when adjusting species value</p></dd>


<dt id="arg-refmonth">refMonth<a class="anchor" aria-label="anchor" href="#arg-refmonth"></a></dt>
<dd><p>numeric. Reference month to use when adjusting species value</p></dd>


<dt id="arg-disagskateshakes">disagSkatesHakes<a class="anchor" aria-label="anchor" href="#arg-disagskateshakes"></a></dt>
<dd><p>boolean. Partition skates and hake unclassified landings into species (Default = T)</p></dd>


<dt id="arg-aggarea">aggArea<a class="anchor" aria-label="anchor" href="#arg-aggarea"></a></dt>
<dd><p>boolean. Aggregate Statistical Areas into larger spatial units (Default = F)</p></dd>


<dt id="arg-userareas">userAreas<a class="anchor" aria-label="anchor" href="#arg-userareas"></a></dt>
<dd><p>data frame. Spatial units in which Statistical areas should be aggregated (eg. <code><a href="mskeyAreas.html">mskeyAreas</a></code>)</p></dd>


<dt id="arg-areadescription">areaDescription<a class="anchor" aria-label="anchor" href="#arg-areadescription"></a></dt>
<dd><p>character string. Field name in <code>userAreas</code> denoting spatial unit. (Default = "EPU")</p></dd>


<dt id="arg-propdescription">propDescription<a class="anchor" aria-label="anchor" href="#arg-propdescription"></a></dt>
<dd><p>character string. Field name in <code>userAreas</code> denoting the scaling factor. (Default = "MeanProp")</p></dd>


<dt id="arg-applyprop">applyProp<a class="anchor" aria-label="anchor" href="#arg-applyprop"></a></dt>
<dd><p>boolean. Apply the proportions in userAreas to the landings and value (Default = T)</p></dd>


<dt id="arg-agggear">aggGear<a class="anchor" aria-label="anchor" href="#arg-agggear"></a></dt>
<dd><p>boolean. Aggregate NEGEAR codes to larger "fleets" (Default = F)</p></dd>


<dt id="arg-usergears">userGears<a class="anchor" aria-label="anchor" href="#arg-usergears"></a></dt>
<dd><p>data frame. Fleet designations in which NEGEAR codes should be grouped (eg.  <code><a href="mskeyGears.html">mskeyGears</a></code>)</p></dd>


<dt id="arg-fleetdescription">fleetDescription<a class="anchor" aria-label="anchor" href="#arg-fleetdescription"></a></dt>
<dd><p>character string. Field name in <code>userGears</code> denoting Fleet. (Default = "Fleet")</p></dd>


<dt id="arg-unkvar">unkVar<a class="anchor" aria-label="anchor" href="#arg-unkvar"></a></dt>
<dd><p>character vector. Variables in the data, with have missing values, that you wish to assign a value to. (unkVar = NULL skips assigning unknowns)</p></dd>


<dt id="arg-knstrata">knStrata<a class="anchor" aria-label="anchor" href="#arg-knstrata"></a></dt>
<dd><p>character vector. Variables in the data that you wish to use to use to assign values to <code>unkVar</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame (data.table) (n x 12)
Each row of the data.table represents a species record for a given tow/trip</p>
<dl><dt>YEAR</dt>
<dd><p>Year of trip/tow</p></dd>

<dt>MONTH</dt>
<dd><p>Month of trip/tow</p></dd>

<dt>NEGEAR/Fleet</dt>
<dd><p>Fishing gear used on trip/tow or aggregated to Fleet</p></dd>

<dt>TONCL2</dt>
<dd><p>Tonnage class of the fishing vessel (2 digit value)</p></dd>

<dt>NESPP3</dt>
<dd><p>Species code (3 charachters)</p></dd>

<dt>MARKET_CODE</dt>
<dd><p>market code (2 characters)</p></dd>

<dt>MESHCAT</dt>
<dd><p>Code to describe the mesh size for a trawl vessel</p></dd>

<dt>AREA/EPU</dt>
<dd><p>Statistical area/ Ecological Production Unit in which species was reportly caught</p></dd>

<dt>UTILCD</dt>
<dd><p>Utilization code</p></dd>

<dt>US</dt>
<dd><p>Landing from the USA vessels or foreign vessels</p></dd>

<dt>SPPLIVMT</dt>
<dd><p>Weight in metric tons.</p></dd>

<dt>SPPVALUE</dt>
<dd><p>The value of landed catch to the nearest dollar (U.S.), paid to fisherman by dealer, for a given species.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="argument-choices">Argument choices<a class="anchor" aria-label="anchor" href="#argument-choices"></a></h2>



<p>Some of the arguments rely on the choice of others.</p>
<p>If <code>aggArea = T</code> then the user must also supply a <code>userAreas</code> data frame
and a <code>areaDescription</code> string to denote the field in <code>userArea</code> which
maps the statistical area to the larger spatial unit.</p>
<p>If <code>aggGear = T</code> then the user must also supply a <code>userGears</code> data frame
and a <code>fleetDescription</code> string to denote the field in <code>userGears</code> which
maps the NEGEAR codes to the fleet designation.</p>
<p>If either <code>aggArea = T</code> or <code>aggGear = T</code> and the user wants to assign values to
missing variables (i.e. if <code>unkVar</code> != NULL) then <code>unkVar</code> and <code>knStrata</code> need to
include the values of <code>areaDescription</code> and <code>fleetDescription</code> respectively</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Lucey, Andy Beet.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

